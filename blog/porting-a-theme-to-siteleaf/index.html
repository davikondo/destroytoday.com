



<!DOCTYPE html>
<html>
  <head>
    <meta charset='UTF-8'>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>

    <title>Destroy Today - Porting a theme to Siteleaf</title>

    <meta property="twitter:account_id" content="14839458">
    <meta name='description' content='Destroy Today is a partnership between builders. Its focus is on solving problems through products crafted with close attention to design and user experience.'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <link rel='icon' type='image/png' href='/images/favicon.png'>
    <link rel='shortcut icon' type='image/png' href='/images/favicon.png'>

    <link type="application/rss+xml" rel="alternate" title="Destroy Today" href="http://feeds.feedburner.com/destroytoday">
    <link href="//cdn.symbolset.com/def34a3b3a8a2254d0505e930e7725af52921dbe/symbolset.css" rel="stylesheet">
    <link href='/styles/screen.css' rel='stylesheet'>

    <script>
  (function() {
  var config = {
  kitId: 'aeu3zes',
  scriptTimeout: 3000
  };
  var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
  })();
</script>

    <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3256994-11']);
  _gaq.push(['_setDomainName', 'destroytoday.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    <style>
  
  
  
  
  

  html, body {
    background-color: #FFF;
    color: #000
  }

  ::selection {
    background-color: #8dcf3f;
    color: #FFF;
  }

  .main-header {
    background-color: #8dcf3f;
    color: #FFF;
  }

  a,
  .tweet-button:hover,
  .pagination a:hover {
    color: #000;
  }

  .project-listing:hover img {
    border-bottom-color: #000;
  }

  a:hover,
  .pagination a,
  .content-subheader a:hover,
  .content-body a:hover,
  .content-body .more,
  .project li a,
  .content-footer a,
  .tweet-button,
  .listing-footer a:hover,
  .list-footer a,
  .article-footer p a:hover {
    color: #8dcf3f;
  }

  .content-subheader,
  .content-subheader a,
  .listing-footer,
  .listing-footer a,
  .main-footer,
  .article-footer p,
  .article-footer p a {
    color: #999;
  }

  .main-header a {
    color: #FFF;
  }

  .content-body a,
  .project li a:hover {
    border-bottom: solid 2px #8dcf3f;
  }

  .project li a {
    border-bottom: none;
  }

  .content-body blockquote {
    border-left-color: #8dcf3f;
  }
</style>

  </head>

  <body class='post'>
    <header id='main-header' class='main-header ss-navigatedown'>
      <div class='wrapper'>
        <h1 class='main-title'>
          <a href='/'>
            <span class='main-title-prefix'>destroy</span><span class='main-title-suffix'>today</span>
          </a>
        </h1>
        <nav class='main-nav'>
          <ul class='main-nav-list'>
            
            

            
              
            
              
                

                <li>
                  <a href='/about'>About</a>
                </li>

                
              
            
              
                

                <li>
                  <a href='/office-hours'>Office Hours</a>
                </li>

                
              
            
              
                
                  </ul>
                  <ul class='main-nav-list'>
                

                <li class='is-selected'>
                  <a href='/blog'>Writings</a>
                </li>

                
              
            
              
                

                <li>
                  <a href='/findings'>Findings</a>
                </li>

                
              
            
              
                
                  </ul>
                  <ul class='main-nav-list'>
                

                <li>
                  <a href='/work'>Projects</a>
                </li>

                
              
            
              
                

                <li>
                  <a href='/experiments'>Experiments</a>
                </li>

                
              
            
          </ul>
        </nav>
      </div>
    </header>

    <main class='main-content'>
      <div class='wrapper'>
        
<article class='article'>
  <header class='content-header'>
    <h2 class='content-title webfont'>
      <a href='/blog/porting-a-theme-to-siteleaf'>Porting a theme to Siteleaf</a>
    </h2>
    <h3 class='content-subheader'>
      <a class='next nav-icon ss-icon' href='/blog/brooklyn-beta-is-people' style='visibility: visible'>navigateleft</a>
      <a class='content-date' href='/blog/porting-a-theme-to-siteleaf'>September 16, 2013</a>
      <a class='previous nav-icon ss-icon' href='/blog/washing-the-dishes' style='visibility: visible'>navigateright</a>
    </h3>
  </header>
  <div class='content-body'>
    <p><strong><img src="/assets/porting-a-theme-to-siteleaf-martin.png" alt="porting-a-theme-to-siteleaf-martin"></strong></p>

<p>Today, I ported <a href="http://martin.siteleaf.net">another theme</a> to <a href="http://siteleaf.com">Siteleaf</a>—<a href="http://twitter.com/house">Allison House&rsquo;s</a> <a href="http://house.github.io/martin/">Martin theme</a>. I started porting themes to Siteleaf earlier this month as a self-imposed challenge. A friend of mine asked if a particular theme was possible to implement using Siteleaf and rather than answer with a simple &lsquo;yes&rsquo;, I responded with <a href="http://balzac.siteleaf.net">the ported theme</a>. This was a great way of demonstrating Siteleaf&rsquo;s adaptability, but also a useful exercise for myself to see where Siteleaf excels and where it falls short. In this post, I&rsquo;ll walk through porting the Martin theme and show you just how easy it can be.</p>

<p>If you first take a look at the <a href="https://github.com/destroytoday/martin-for-siteleaf/commit/4d7bb736b682294513db591d9c47bdb34713c507#L9R3">diff</a> on Github, you&rsquo;ll immediately see how little I needed to change in order to port the theme to Siteleaf. In fact, I only replaced six lines—and I deleted several dozen in the process. I accomplished this by extracting the theme&rsquo;s content to Siteleaf and wiring these spots to page variables and meta fields.</p>

<p><img src="/assets/porting-a-theme-to-siteleaf-sections.png" alt="porting-a-theme-to-siteleaf-sections"> </p>

<p>Looking at the previous code, we can separate the entire page into three sections—header, body (represented as a <code>&lt;section&gt;</code>), and footer. If we take a closer look at the body, the bulk of it is simple HTML that can easily be rendered from Markdown. Because of this, we can replace the entire block of code inside the <code>&lt;section&gt;</code> tag with the liquid tag <code>{{ body }}</code> and move the previous content into a Siteleaf page body, rewritten in Markdown. Siteleaf will render that Markdown to HTML, inject it into our template, and allow us to modify it easily in the CMS, without touching the template code. Previously, the snippet of code to produce a table looked like this:</p>

<pre><code class="html">&lt;h2&gt;Table&lt;/h2&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Whiskey&lt;/th&gt;
      &lt;th&gt;Tango&lt;/th&gt;
      &lt;th&gt;Foxtrot&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Apple&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;a&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Blueberry&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;b&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Banana&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;c&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</code></pre>

<p>Now, thanks to Markdown, we can replicate this table in the Siteleaf CMS, using the following code:</p>

<pre><code class="markdown">## Table

| Whiskey    | Tango | Foxtrot |
| ---------- | ----- | ------- |
| Apple      | 1     | a       |
| Blueberry  | 2     | b       |
| Banana     | 3     | c       |
</code></pre>

<p>The end result is the same both ways, but with Siteleaf and Markdown, the content is much easier to digest and no longer hard-coded into the template. You can compare the before/after of the page&rsquo;s content in these two gists: <a href="https://gist.github.com/destroytoday/6598835">HTML</a> vs <a href="https://gist.github.com/destroytoday/6598658">Markdown</a></p>

<p>The body content is typically the easiest to extract because Siteleaf does most of the work. Let&rsquo;s now take a look at the header, which is comprised of a few external links, the page&rsquo;s title and its tagline.</p>

<p><img src="/assets/porting-a-theme-to-siteleaf-header.png" alt="porting-a-theme-to-siteleaf-header"> </p>

<p>If this theme were meant for multiple pages, the links at the top would appear on every page, so it&rsquo;s safe to consider these global values. As such, we can extract them into site meta fields. Starting with the byline in the top-left, we <em>could</em> simply replace it with the full URL to the GitHub profile page, but instead, let&rsquo;s write the template in a way that saves us from repeating the URI with every occurrance. I take this approach because we use several GitHub links on the top bar, including one for the repo and another for a zip of the master branch. Here&rsquo;s a look at the previous code:</p>

<pre><code class="html">&lt;div class=&quot;byline&quot;&gt;
  &lt;a href=&quot;https://github.com/house&quot;&gt;github.com/house&lt;/a&gt;
&lt;/div&gt;
&lt;div class=&quot;downloads&quot;&gt;
  &lt;a href=&quot;https://github.com/house/martin&quot;&gt;Fork on GitHub&lt;/a&gt;
  &amp;bull;
  &lt;a href=&quot;https://github.com/house/martin/archive/master.zip&quot;&gt;Download ZIP&lt;/a&gt;
&lt;/div&gt;
</code></pre>

<p>The base GitHub URL appears three times (and once without the protocol), the GitHub username four times, and the GitHub repo name twice. If we take a stance and agree to use GitHub to host our source code when using this theme, we can extract both the GitHub username and repo name into site meta fields:</p>

<pre><code class="html">&lt;div class=&quot;byline&quot;&gt;
  &lt;a href=&quot;https://github.com/{{ site.meta.github_user }}&quot;&gt;github.com/{{ site.meta.github_user }}&lt;/a&gt;
&lt;/div&gt;
&lt;div class=&quot;downloads&quot;&gt;
  &lt;a href=&quot;https://github.com/{{ site.meta.github_user }}/{{ site.meta.github_repo }}&quot;&gt;Fork on GitHub&lt;/a&gt;
  &amp;bull; 
  &lt;a href=&quot;https://github.com/{{ site.meta.github_user }}/{{ site.meta.github_repo }}/archive/master.zip&quot;&gt;Download ZIP&lt;/a&gt;
&lt;/div&gt;
</code></pre>

<p>With this setup, if we ever decide to change our username or repo name, we only need to do it once, without touching the template code. I try to extract as much content as possible, so anyone could upload the theme and have full control over the copy. We can achieve this with a couple more site meta fields, but let&rsquo;s also specify fallbacks, so these are optional to the user:</p>

<pre><code class="html">&lt;div class=&quot;byline&quot;&gt;&lt;a href=&quot;https://github.com/{{ site.meta.github_user }}&quot;&gt;github.com/{{ site.meta.github_user }}&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;downloads&quot;&gt;
  &lt;a href=&quot;https://github.com/{{ site.meta.github_user }}/{{ site.meta.github_repo }}&quot;&gt;{{ site.meta.fork_text | fallback: &#39;Fork on GitHub&#39; }}&lt;/a&gt;
  &amp;bull; 
  &lt;a href=&quot;https://github.com/{{ site.meta.github_user }}/{{ site.meta.github_repo }}/archive/master.zip&quot;&gt;{{ site.meta.download_text | fallback: &#39;Download ZIP&#39; }}&lt;/a&gt;
&lt;/div&gt;
</code></pre>

<p>The second half the header consists of the page&rsquo;s title and tagline. Since this theme is intended to be a single, standalone page, I could&rsquo;ve used the site title and a site meta field for the tagline, but I wanted to keep it open to multiple pages, so I went with the page title and a page meta field:</p>

<pre><code class="html">&lt;hgroup&gt;
  &lt;h1&gt;{{ title }}&lt;/h1&gt;
  &lt;h2 class=&quot;tagline&quot;&gt;{{ meta.tagline }}&lt;/h2&gt;
&lt;/hgroup&gt;
</code></pre>

<p>Now, if we ever add a &lsquo;Team&rsquo; page, we can adapt the header to the new page without needing to touch the template.</p>

<p>The last remaining piece of the puzzle is the window title. Typically, I set this to <code>{{ site.title }} / {{ title }}</code>, but this theme&rsquo;s title includes both the title and a credit to the creator, Allison. Rather than set the site title to such a length, once again, I used a site meta field with a fallback to the site title:</p>

<pre><code class="html">&lt;title&gt;{{ site.meta.window_title | fallback: site.title }}&lt;/title&gt;
</code></pre>

<p>Again, the user can upload the theme without specifying the <code>window_title</code>, but it&rsquo;s also there if they need it.</p>

<h3>Wrapping up</h3>

<p>Allison&rsquo;s theme, <a href="http://house.github.io/martin/">Martin</a>, is a beautiful theme, and its simplicity, both in style and code, is what attracted me. While the theme is a good example for a single-page site, there is so much more to cover when porting larger, more complex themes. Hopefully, this walkthrough gives you a solid starting point to try it for yourself. I&rsquo;m going to continue porting themes to Siteleaf, while providing the source code on <a href="https://github.com/destroytoday">my GitHub account</a>. You can also check out the <a href="https://github.com/siteleaf/siteleaf-themes/wiki/Siteleaf-themes-on-Github">list of existing themes</a> on the Siteleaf wiki.</p>

  </div>
  <footer class='article-footer'>
  
  
  <a class='tweet-button' href='https://twitter.com/intent/tweet?original_referer=http://destroytoday.com/blog/porting-a-theme-to-siteleaf&text=I thoroughly enjoyed this post &gt; &quot;Porting a theme to Siteleaf&quot;:&tw_p=tweetbutton&url=http://destroytoday.com/blog/porting-a-theme-to-siteleaf&via=destroytoday' target='_blank'><span class='ss-icon ss-social-regular'>twitter</span><span id='twitter-count' class='count'></span></a>
  <script>
    function count_callback(data) { document.getElementById('twitter-count').innerHTML = data.count; }
    var script = document.createElement('script');
    script.setAttribute("src", 'http://urls.api.twitter.com/1/urls/count.json?callback=count_callback&url=http://destroytoday.com/blog/porting-a-theme-to-siteleaf');
    document.getElementsByTagName("head")[0].appendChild(script);
  </script>
</footer>

</article>



<section class='featured-section column-section list-section'>
  <h3>Featured writings</h3>
  <ul class='vertical-list'>
    
      
        <li class='vertical-listing' style="border-left: solid 5px #9faaa6">
          <a href='/blog/sabbatical'>Lessons learned on a 3‑month sabbatical</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #364350">
          <a href='/blog/building-the-carousel-website'>Building the Carousel website with Dropbox</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #549BA6">
          <a href='/blog/cushion'>Cushion</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #bab0a8">
          <a href='/blog/my-dad'>Book covers, model airplanes, and my dad</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #C94A00">
          <a href='/blog/building-the-pencil-page'>Building the Pencil page with FiftyThree</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #2e9ef0">
          <a href='/blog/gif-workflow'>The perfect GIF workflow using Dropbox and Alfred</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #005dba">
          <a href='/blog/redesigning-with-rules'>Redesigning with rules</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #499462">
          <a href='/blog/lessons-learned-in-a-year-on-my-own'>Lessons learned in a year on my own</a>
        </li>
      
    
      
        <li class='vertical-listing' style="border-left: solid 5px #f5503c">
          <a href='/blog/wedding-tech'>The tech behind our wedding</a>
        </li>
      
    
  </ul>
  <footer class='list-footer'>
    <a href='/blog'>Archive &rarr;</a>
  </footer>
</section>


<footer class='content-footer'>
  <p>Follow <a href='http://twitter.com/destroytoday'>@destroytoday</a> on Twitter.</p>
</footer>


      </div>
    </main>

    <footer class='main-footer'>
      <p>Made with <span class="ss-icon">love</span> in Brooklyn</p>
      <p>&copy; 2015 Destroy Today, LLC. All Rights Reserved</p>
    </footer>

    
  
    <div class='pagination next'>
      <a class='icon ss-navigateleft' href='/blog/brooklyn-beta-is-people'></a>
    </div>
  

  
    <div class='pagination previous'>
      <a class='icon ss-navigateright' href='/blog/washing-the-dishes'></a>
    </div>
  

  <script>
    document.body.onkeyup = function(e){
      
      if (e.keyCode == '37') { window.location = '/blog/brooklyn-beta-is-people'; }
      

      
      if (e.keyCode == '39') { window.location = '/blog/washing-the-dishes'; }
      
    };
  </script>



    <script src="//cdn.symbolset.com/def34a3b3a8a2254d0505e930e7725af52921dbe/symbolset.js"></script>
    <script src="//platform.twitter.com/widgets.js"></script>
    <script>
      var mainHeader = document.getElementById('main-header');
      var body = document.body;
      var mainHeader_startHeight,
          startTouchY,
          touchY,
          prevTouchY,
          touchDirection,
          touch;

      mainHeader.addEventListener('click', function(e){
        if (touch || window.innerWidth <= 480)
        {
          e.preventDefault();
        }

        if (this.className.search('is-expanded') == -1)
        {
          this.className += ' is-expanded';
        }
        else
        {
          this.className = this.className.replace(' is-expanded', '');
        }
      });

      [].forEach.call(document.querySelectorAll('.main-nav-list a'), function(link) {
        link.addEventListener('touchstart', function(e) {
          e.stopPropagation();
          e.preventDefault();

          window.location.href = link.href;
        });
      });

      var window_touchmoved = function(e) {
        e.preventDefault();

        touchY = e.changedTouches[0].clientY;
        mainHeader.style.height =
          mainHeader_startHeight + (touchY - startTouchY) + 'px';

        touchDirection = touchY > prevTouchY ? 1 : -1;

        prevTouchY = touchY;
      };

      mainHeader.addEventListener('touchstart', function(e) {
        e.preventDefault();
        touch = true;

        mainHeader_startHeight = this.offsetHeight;
        startTouchY =
          prevTouchY = e.changedTouches[0].clientY;

        this.className += ' is-touching';
        window.addEventListener('touchmove', window_touchmoved, false);
      }, false);

      mainHeader.addEventListener('touchend', function(e) {
        window.removeEventListener('touchmove', window_touchmoved);

        this.style.height = '';
        this.className = this.className.replace(' is-touching', '');

        if (touchDirection == -1)
        {
          this.className = this.className.replace(' is-expanded', '');
        }
        else if (this.className.search('is-expanded') == -1)
        {
          this.className += ' is-expanded';
        }
      }, false);
    </script>
    
<script src="/scripts/rainbow.js"></script>


  </body>
</html>


